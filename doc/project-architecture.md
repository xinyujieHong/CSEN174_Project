# CampusPool é¡¹ç›®æ¶æ„åˆ†ææ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: CampusPool - å¤§å­¦æ‹¼è½¦åº”ç”¨  
**æŠ€æœ¯æ ˆ**: React + TypeScript (å‰ç«¯) + Express.js (åç«¯)  
**å½“å‰å­˜å‚¨æ–¹å¼**: å†…å­˜å­˜å‚¨ (In-Memory)  
**éƒ¨ç½²æ–¹å¼**: å‰åç«¯åˆ†ç¦»æ¶æ„

---

## ğŸ—ï¸ æ•´ä½“æ¶æ„

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯ (Frontend)                           â”‚
â”‚                  React + TypeScript                          â”‚
â”‚                  http://localhost:3000                       â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ä¸»è¦é¡µé¢ç»„ä»¶                                          â”‚   â”‚
â”‚  â”‚  - LoginPage.tsx         (ç™»å½•é¡µé¢)                   â”‚   â”‚
â”‚  â”‚  - SignupPage.tsx        (æ³¨å†Œé¡µé¢)                   â”‚   â”‚
â”‚  â”‚  - ProfileSetupPage.tsx  (ä¸ªäººèµ„æ–™è®¾ç½®)               â”‚   â”‚
â”‚  â”‚  - FeedPage.tsx          (æ‹¼è½¦è¯·æ±‚åŠ¨æ€)               â”‚   â”‚
â”‚  â”‚  - MessagesPage.tsx      (æ¶ˆæ¯é¡µé¢)                   â”‚   â”‚
â”‚  â”‚  - ProfilePage.tsx       (ç”¨æˆ·èµ„æ–™é¡µé¢)               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  å·¥å…·æ¨¡å— (Utils)                                      â”‚   â”‚
â”‚  â”‚  - api/client.ts         (APIå®¢æˆ·ç«¯)                  â”‚   â”‚
â”‚  â”‚  - config.ts             (é…ç½®æ–‡ä»¶)                   â”‚   â”‚
â”‚  â”‚  - validators/           (æ•°æ®éªŒè¯å™¨)                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ HTTP REST API (JSON)
                     â”‚ Authorization: Bearer <JWT Token>
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åç«¯ (Backend)                            â”‚
â”‚                    Express.js                                â”‚
â”‚                  http://localhost:3001                       â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  server.js - ä¸»æœåŠ¡å™¨æ–‡ä»¶                              â”‚   â”‚
â”‚  â”‚  - è·¯ç”±å¤„ç† (Routes)                                   â”‚   â”‚
â”‚  â”‚  - ä¸­é—´ä»¶ (Middleware)                                 â”‚   â”‚
â”‚  â”‚  - JWT è®¤è¯                                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  dataStore.js - æ•°æ®å­˜å‚¨å±‚                             â”‚   â”‚
â”‚  â”‚  - ç”¨æˆ·ç®¡ç† (Users)                                    â”‚   â”‚
â”‚  â”‚  - ä¸ªäººèµ„æ–™ (Profiles)                                 â”‚   â”‚
â”‚  â”‚  - æ‹¼è½¦è¯·æ±‚ (Carpool Requests)                         â”‚   â”‚
â”‚  â”‚  - å¯¹è¯ (Conversations)                                â”‚   â”‚
â”‚  â”‚  - æ¶ˆæ¯ (Messages)                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  å½“å‰å­˜å‚¨: å†…å­˜ (Map æ•°æ®ç»“æ„)                          â”‚   â”‚
â”‚  â”‚  âš ï¸ æ•°æ®åœ¨æœåŠ¡å™¨é‡å¯åä¸¢å¤±                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‚ é¡¹ç›®ç›®å½•ç»“æ„

```
C-carpool/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.tsx                    # ä¸»åº”ç”¨ç»„ä»¶ï¼Œè·¯ç”±æ§åˆ¶
â”‚   â”œâ”€â”€ main.tsx                   # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ index.css                  # å…¨å±€æ ·å¼
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ LoginPage.tsx          # ç™»å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ SignupPage.tsx         # æ³¨å†Œé¡µé¢
â”‚   â”‚   â”œâ”€â”€ ProfileSetupPage.tsx   # ä¸ªäººèµ„æ–™è®¾ç½®
â”‚   â”‚   â”œâ”€â”€ FeedPage.tsx           # æ‹¼è½¦åŠ¨æ€é¡µé¢
â”‚   â”‚   â”œâ”€â”€ MessagesPage.tsx       # æ¶ˆæ¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ ProfilePage.tsx        # ç”¨æˆ·èµ„æ–™é¡µé¢
â”‚   â”‚   â””â”€â”€ ui/                    # UI ç»„ä»¶åº“ (shadcn/ui)
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                     # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ client.ts          # API å®¢æˆ·ç«¯ (ä¸åç«¯é€šä¿¡)
â”‚   â”‚   â”œâ”€â”€ config.ts              # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ CarpoolRequestValidator.ts
â”‚   â”‚   â”œâ”€â”€ ProfileValidator.ts
â”‚   â”‚   â”œâ”€â”€ UserValidator.ts
â”‚   â”‚   â”œâ”€â”€ DateTimeUtil.ts
â”‚   â”‚   â””â”€â”€ MessageHandler.ts
â”‚   â”‚
â”‚   â””â”€â”€ backend/                   # åç«¯ä»£ç 
â”‚       â”œâ”€â”€ server.js              # Express æœåŠ¡å™¨ä¸»æ–‡ä»¶
â”‚       â”œâ”€â”€ dataStore.js           # æ•°æ®å­˜å‚¨æŠ½è±¡å±‚
â”‚       â”œâ”€â”€ package.json           # åç«¯ä¾èµ–
â”‚       â”œâ”€â”€ API.md                 # API æ–‡æ¡£
â”‚       â”œâ”€â”€ ARCHITECTURE.md        # æ¶æ„æ–‡æ¡£
â”‚       â””â”€â”€ SETUP.md               # è®¾ç½®æŒ‡å—
â”‚
â”œâ”€â”€ doc/                           # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ package.json                   # å‰ç«¯ä¾èµ–
â”œâ”€â”€ vite.config.ts                 # Vite é…ç½®
â””â”€â”€ index.html                     # HTML å…¥å£
```

---

## ğŸ”„ å‰åç«¯äº¤äº’æµç¨‹

### 1. è®¤è¯æµç¨‹

```
ç”¨æˆ·æ³¨å†Œ/ç™»å½•
    â†“
å‰ç«¯ (LoginPage/SignupPage)
    â†“
API Client (client.ts)
    â”œâ”€ POST /api/auth/signup
    â””â”€ POST /api/auth/signin
    â†“
åç«¯ (server.js)
    â”œâ”€ éªŒè¯ç”¨æˆ·ä¿¡æ¯
    â”œâ”€ ä½¿ç”¨ bcrypt åŠ å¯†å¯†ç 
    â”œâ”€ å­˜å‚¨åˆ° dataStore
    â””â”€ ç”Ÿæˆ JWT Token
    â†“
è¿”å› { user, token }
    â†“
å‰ç«¯å­˜å‚¨åˆ° localStorage
    â”œâ”€ campuspool_auth_token
    â””â”€ campuspool_user
```

### 2. æ•°æ®è¯·æ±‚æµç¨‹

```
ç”¨æˆ·æ“ä½œ (å¦‚åˆ›å»ºæ‹¼è½¦è¯·æ±‚)
    â†“
å‰ç«¯ç»„ä»¶ (FeedPage.tsx)
    â†“
API Client (client.ts)
    â”œâ”€ ä» localStorage è·å– token
    â”œâ”€ æ·»åŠ åˆ° Authorization header
    â””â”€ å‘é€ HTTP è¯·æ±‚
    â†“
åç«¯ä¸­é—´ä»¶
    â”œâ”€ CORS æ£€æŸ¥
    â”œâ”€ JSON è§£æ
    â”œâ”€ JWT éªŒè¯ (authenticateToken)
    â””â”€ è¯·æ±‚æ—¥å¿—
    â†“
è·¯ç”±å¤„ç†å™¨ (server.js)
    â”œâ”€ ä¸šåŠ¡é€»è¾‘å¤„ç†
    â””â”€ è°ƒç”¨ dataStore
    â†“
æ•°æ®å­˜å‚¨å±‚ (dataStore.js)
    â”œâ”€ æ“ä½œå†…å­˜ Map
    â””â”€ è¿”å›ç»“æœ
    â†“
å“åº”è¿”å›å‰ç«¯
    â†“
å‰ç«¯æ›´æ–° UI
```

---

## ğŸ—„ï¸ æ•°æ®æ¨¡å‹

### 1. User (ç”¨æˆ·)
```javascript
{
  id: "uuid-v4",              // è‡ªåŠ¨ç”Ÿæˆ
  email: "student@edu.com",   // å”¯ä¸€ï¼Œå¿…å¡«
  password: "hashed-password", // bcrypt åŠ å¯†ï¼Œå¿…å¡«
  name: "å¼ ä¸‰",                // æ˜¾ç¤ºåç§°ï¼Œå¿…å¡«
  createdAt: "2025-11-22T..."  // åˆ›å»ºæ—¶é—´
}
```

### 2. UserProfile (ç”¨æˆ·èµ„æ–™)
```javascript
{
  userId: "uuid-v4",           // å…³è” User.id
  name: "å¼ ä¸‰",
  college: "æŸæŸå¤§å­¦",
  hasCar: true,                // æ˜¯å¦æœ‰è½¦
  
  // å¦‚æœ hasCar = true:
  carModel: "æœ¬ç”°æ€åŸŸ",
  carColor: "è“è‰²",
  carYear: "2020",
  carLicense: "äº¬A12345",
  
  bio: "ä¹æ„æä¾›æ‹¼è½¦æœåŠ¡ï¼",
  profilePicture: "https://...",
  updatedAt: "2025-11-22T..."   // æ›´æ–°æ—¶é—´
}
```

### 3. CarpoolRequest (æ‹¼è½¦è¯·æ±‚)
```javascript
{
  id: "uuid-v4",               // è‡ªåŠ¨ç”Ÿæˆ
  userId: "uuid-v4",           // å‘å¸ƒè€… ID
  userName: "å¼ ä¸‰",
  userPicture: "https://...",
  destination: "å¸‚ä¸­å¿ƒæ ¡åŒº",
  date: "2025-11-25",          // ISO æ—¥æœŸ
  time: "09:00",               // HH:MM æ ¼å¼
  seats: 3,                    // å¯ç”¨åº§ä½æ•°
  notes: "ä»åŒ—é—¨å‡ºå‘",
  responses: ["user-id-1"],    // å“åº”çš„ç”¨æˆ· ID æ•°ç»„
  createdAt: "2025-11-22T..."  // åˆ›å»ºæ—¶é—´
}
```

### 4. Conversation (å¯¹è¯)
```javascript
{
  id: "conversation-id",       // é€šå¸¸æ˜¯ "userId1__userId2"
  participants: ["user-1", "user-2"],
  status: "pending",           // "pending" | "accepted" | "denied"
  createdAt: "2025-11-22T..."
}
```

### 5. Message (æ¶ˆæ¯)
```javascript
{
  id: "uuid-v4",               // è‡ªåŠ¨ç”Ÿæˆ
  conversationId: "conv-id",   // å…³è” Conversation.id
  senderId: "user-id",         // å‘é€è€… ID
  content: "ä½ å¥½ï¼å¯ä»¥æ‹¼è½¦å—ï¼Ÿ",
  createdAt: "2025-11-22T..."  // åˆ›å»ºæ—¶é—´
}
```

---

## ğŸ”Œ API æ¥å£

### è®¤è¯æ¥å£ (Authentication)

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | éœ€è¦è®¤è¯ |
|------|------|------|---------|
| POST | /api/auth/signup | ç”¨æˆ·æ³¨å†Œ | âŒ |
| POST | /api/auth/signin | ç”¨æˆ·ç™»å½• | âŒ |
| GET | /api/auth/session | è·å–å½“å‰ä¼šè¯ | âœ… |
| POST | /api/auth/signout | ç”¨æˆ·ç™»å‡º | âœ… |

### ç”¨æˆ·èµ„æ–™æ¥å£ (User Profile)

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | éœ€è¦è®¤è¯ |
|------|------|------|---------|
| GET | /api/users/:userId | è·å–ç”¨æˆ·èµ„æ–™ | âœ… |
| POST | /api/users/:userId | æ›´æ–°ç”¨æˆ·èµ„æ–™ | âœ… |

### æ‹¼è½¦è¯·æ±‚æ¥å£ (Carpool Requests)

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | éœ€è¦è®¤è¯ |
|------|------|------|---------|
| GET | /api/carpool-requests | è·å–æ‰€æœ‰æ‹¼è½¦è¯·æ±‚ | âœ… |
| POST | /api/carpool-requests | åˆ›å»ºæ‹¼è½¦è¯·æ±‚ | âœ… |
| PUT | /api/carpool-requests/:id | æ›´æ–°æ‹¼è½¦è¯·æ±‚ | âœ… |
| DELETE | /api/carpool-requests/:id | åˆ é™¤æ‹¼è½¦è¯·æ±‚ | âœ… |
| POST | /api/carpool-requests/:id/respond | å“åº”æ‹¼è½¦è¯·æ±‚ | âœ… |

### æ¶ˆæ¯æ¥å£ (Messaging)

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | éœ€è¦è®¤è¯ |
|------|------|------|---------|
| GET | /api/conversations | è·å–æ‰€æœ‰å¯¹è¯ | âœ… |
| GET | /api/conversations/:id/messages | è·å–å¯¹è¯æ¶ˆæ¯ | âœ… |
| POST | /api/conversations/:id/messages | å‘é€æ¶ˆæ¯ | âœ… |
| PUT | /api/conversations/:id | æ›´æ–°å¯¹è¯çŠ¶æ€ | âœ… |

---

## ğŸ’¾ å½“å‰æ•°æ®å­˜å‚¨å®ç°

### å­˜å‚¨æ–¹å¼: å†…å­˜ (In-Memory)

**æ–‡ä»¶**: `src/backend/dataStore.js`

**å®ç°æ–¹å¼**:
```javascript
export class DataStore {
  constructor() {
    this.users = new Map();              // ç”¨æˆ·æ•°æ®
    this.profiles = new Map();           // ç”¨æˆ·èµ„æ–™
    this.carpoolRequests = new Map();    // æ‹¼è½¦è¯·æ±‚
    this.conversations = new Map();      // å¯¹è¯
    this.messages = new Map();           // æ¶ˆæ¯
  }
  
  // å„ç§æ•°æ®æ“ä½œæ–¹æ³•...
}
```

**ä¼˜ç‚¹**:
- âœ… é›¶é…ç½®ï¼Œå¼€ç®±å³ç”¨
- âœ… å¼€å‘å’Œæµ‹è¯•éå¸¸æ–¹ä¾¿
- âœ… æ€§èƒ½æé«˜ (å†…å­˜è®¿é—®)

**ç¼ºç‚¹**:
- âŒ æ•°æ®åœ¨æœåŠ¡å™¨é‡å¯åä¸¢å¤±
- âŒ æ— æ³•æ‰©å±•åˆ°å¤šä¸ªæœåŠ¡å™¨å®ä¾‹
- âŒ ä¸é€‚åˆç”Ÿäº§ç¯å¢ƒ

---

## ğŸ” å®‰å…¨æœºåˆ¶

### 1. å¯†ç å®‰å…¨
- ä½¿ç”¨ **bcrypt** è¿›è¡Œå¯†ç å“ˆå¸Œ (10 è½®åŠ å¯†)
- æ°¸ä¸å­˜å‚¨æ˜æ–‡å¯†ç 
- ç™»å½•æ—¶ä½¿ç”¨ `bcrypt.compare()` éªŒè¯

### 2. JWT è®¤è¯
- Token æœ‰æ•ˆæœŸ: 7 å¤©
- ä½¿ç”¨ JWT_SECRET ç­¾å
- æ¯ä¸ªå—ä¿æŠ¤çš„è¯·æ±‚éƒ½éœ€è¦éªŒè¯ token
- Token å­˜å‚¨åœ¨ localStorage

### 3. æˆæƒæ£€æŸ¥
- ç”¨æˆ·åªèƒ½ä¿®æ”¹è‡ªå·±çš„èµ„æ–™
- ç”¨æˆ·åªèƒ½åˆ é™¤è‡ªå·±çš„æ‹¼è½¦è¯·æ±‚
- æ¶ˆæ¯åªèƒ½åœ¨å¯¹è¯å‚ä¸è€…ä¹‹é—´å‘é€

### 4. CORS ä¿æŠ¤
- é…ç½®äº†è·¨åŸŸèµ„æºå…±äº«
- ç”Ÿäº§ç¯å¢ƒéœ€è¦é™åˆ¶å…è®¸çš„åŸŸå

---

## ğŸ“± å‰ç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| React | 18.3.1 | UI æ¡†æ¶ |
| TypeScript | - | ç±»å‹å®‰å…¨ |
| Vite | 6.3.5 | æ„å»ºå·¥å…· |
| Tailwind CSS | 4.0 | æ ·å¼æ¡†æ¶ |
| shadcn/ui | - | UI ç»„ä»¶åº“ |
| Radix UI | - | æ— éšœç¢ç»„ä»¶ |
| Lucide React | - | å›¾æ ‡åº“ |
| Sonner | 2.0.3 | Toast é€šçŸ¥ |

---

## ğŸ–¥ï¸ åç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| Express.js | Web æ¡†æ¶ |
| jsonwebtoken | JWT è®¤è¯ |
| bcrypt | å¯†ç åŠ å¯† |
| cors | è·¨åŸŸæ”¯æŒ |
| dotenv | ç¯å¢ƒå˜é‡ |
| crypto | UUID ç”Ÿæˆ |

---

## ğŸš€ éƒ¨ç½²æ¶æ„

### å¼€å‘ç¯å¢ƒ
```
æœ¬åœ°æœºå™¨
â”œâ”€â”€ ç»ˆç«¯ 1: åç«¯ (http://localhost:3001)
â”‚   â””â”€â”€ cd src/backend && npm start
â”‚
â”œâ”€â”€ ç»ˆç«¯ 2: å‰ç«¯ (http://localhost:3000)
â”‚   â””â”€â”€ npm run dev
â”‚
â””â”€â”€ æµè§ˆå™¨: http://localhost:3000
```

### ç”Ÿäº§ç¯å¢ƒå»ºè®®
```
                    äº’è”ç½‘
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     å‰ç«¯ CDN (Vercel/Netlify)       â”‚
â”‚   https://campuspool.vercel.app     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ API è°ƒç”¨
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åç«¯æœåŠ¡å™¨ (Railway/Heroku)        â”‚
â”‚ https://campuspool-api.railway.app  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ æ•°æ®åº“æŸ¥è¯¢
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    æ•°æ®åº“ (MySQL/PostgreSQL)         â”‚
â”‚         æŒä¹…åŒ–å­˜å‚¨                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š æ•°æ®æµå‘å›¾

### ç”¨æˆ·åˆ›å»ºæ‹¼è½¦è¯·æ±‚æµç¨‹

```
1. ç”¨æˆ·åœ¨ FeedPage å¡«å†™è¡¨å•
        â†“
2. ç‚¹å‡»"å‘å¸ƒ"æŒ‰é’®
        â†“
3. FeedPage.tsx è°ƒç”¨ carpoolAPI.createRequest()
        â†“
4. client.ts å‘é€ POST è¯·æ±‚
   - URL: http://localhost:3001/api/carpool-requests
   - Headers: { Authorization: "Bearer <token>" }
   - Body: { destination, date, time, seats, notes }
        â†“
5. åç«¯æ¥æ”¶è¯·æ±‚
   - CORS ä¸­é—´ä»¶ âœ“
   - JSON è§£æå™¨ âœ“
   - æ—¥å¿—è®°å½•å™¨ âœ“
   - JWT éªŒè¯å™¨ âœ“ (è§£ç  userId)
        â†“
6. server.js è·¯ç”±å¤„ç†
   - éªŒè¯æ•°æ®
   - æ·»åŠ  userId, userName, createdAt
   - è°ƒç”¨ dataStore.createCarpoolRequest()
        â†“
7. dataStore.js å­˜å‚¨æ•°æ®
   - ç”Ÿæˆ UUID
   - å­˜å…¥ carpoolRequests Map
   - è¿”å› requestId
        â†“
8. è¿”å›å“åº”ç»™å‰ç«¯
   { message: "æˆåŠŸ", request: {...} }
        â†“
9. FeedPage æ›´æ–° UI
   - æ˜¾ç¤ºæˆåŠŸæç¤º
   - åˆ·æ–°æ‹¼è½¦åˆ—è¡¨
```

---

## ğŸ”„ å®æ—¶æ›´æ–°æœºåˆ¶

### å½“å‰å®ç°: è½®è¯¢ (Polling)

**é…ç½®**: `src/utils/config.ts`
```typescript
pollingInterval: 5000  // æ¯ 5 ç§’è½®è¯¢ä¸€æ¬¡
```

**å·¥ä½œåŸç†**:
```
å‰ç«¯æ¯ 5 ç§’è‡ªåŠ¨è°ƒç”¨:
- carpoolAPI.getRequests()      // è·å–æ‹¼è½¦è¯·æ±‚
- messagingAPI.getConversations() // è·å–å¯¹è¯åˆ—è¡¨
- messagingAPI.getMessages()     // è·å–æ¶ˆæ¯
```

**ä¼˜ç‚¹**: ç®€å•æ˜“å®ç°  
**ç¼ºç‚¹**: 
- å¢åŠ æœåŠ¡å™¨è´Ÿè½½
- ä¸æ˜¯çœŸæ­£çš„å®æ—¶
- æµªè´¹å¸¦å®½

**æœªæ¥æ”¹è¿›**: å¯ä»¥å‡çº§ä¸º WebSocket å®ç°çœŸæ­£çš„å®æ—¶æ¨é€

---

## ğŸ“ é…ç½®æ–‡ä»¶

### å‰ç«¯é…ç½®: `src/utils/config.ts`
```typescript
export const config = {
  apiUrl: 'http://localhost:3001/api',  // åç«¯ API åœ°å€
  pollingInterval: 5000,                 // è½®è¯¢é—´éš” (æ¯«ç§’)
  tokenExpiryWarning: 1,                 // Token è¿‡æœŸè­¦å‘Š (å¤©)
};
```

### åç«¯é…ç½®: `src/backend/.env`
```bash
PORT=3001                              # æœåŠ¡å™¨ç«¯å£
JWT_SECRET=your-secret-key             # JWT å¯†é’¥ (ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹)
NODE_ENV=development                   # ç¯å¢ƒ
```

---

## ğŸ§ª æµ‹è¯•

é¡¹ç›®åŒ…å« 150+ å•å…ƒæµ‹è¯•:
- UserValidator æµ‹è¯•
- ProfileValidator æµ‹è¯•
- CarpoolRequestValidator æµ‹è¯•
- DateTimeUtil æµ‹è¯•
- MessageHandler æµ‹è¯•

**è¿è¡Œæµ‹è¯•**:
```bash
npm test
```

---

## ğŸ“š æ–‡æ¡£èµ„æº

é¡¹ç›®åŒ…å«è¯¦ç»†çš„æ–‡æ¡£:
- `src/README.md` - é¡¹ç›®æ€»è§ˆ
- `src/backend/README.md` - åç«¯æ–‡æ¡£
- `src/backend/API.md` - API è¯¦ç»†æ–‡æ¡£
- `src/backend/ARCHITECTURE.md` - æ¶æ„è¯¦ç»†è¯´æ˜
- `src/backend/SETUP.md` - è®¾ç½®æŒ‡å—
- `src/DEPLOYMENT_GUIDE.md` - éƒ¨ç½²æŒ‡å—
- `src/QUICK_START.md` - å¿«é€Ÿå¼€å§‹

---

## ğŸ¯ æ€»ç»“

CampusPool æ˜¯ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„å…¨æ ˆåº”ç”¨:

**æ¶æ„ä¼˜åŠ¿**:
- âœ… å‰åç«¯åˆ†ç¦»ï¼ŒèŒè´£æ¸…æ™°
- âœ… RESTful API è®¾è®¡è§„èŒƒ
- âœ… æ•°æ®å­˜å‚¨å±‚æŠ½è±¡ï¼Œæ˜“äºæ›¿æ¢
- âœ… JWT è®¤è¯å®‰å…¨å¯é 
- âœ… ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤

**å½“å‰é™åˆ¶**:
- âš ï¸ ä½¿ç”¨å†…å­˜å­˜å‚¨ï¼Œä¸é€‚åˆç”Ÿäº§ç¯å¢ƒ
- âš ï¸ ä½¿ç”¨è½®è¯¢è€Œé WebSocket
- âš ï¸ å•æœåŠ¡å™¨æ¶æ„ï¼Œæ— æ³•æ°´å¹³æ‰©å±•

**æ”¹è¿›æ–¹å‘**:
- ğŸ”„ è¿ç§»åˆ° MySQL/PostgreSQL æ•°æ®åº“
- ğŸ”„ å®ç° WebSocket å®æ—¶é€šä¿¡
- ğŸ”„ æ·»åŠ  Redis ç¼“å­˜å±‚
- ğŸ”„ å®ç°è´Ÿè½½å‡è¡¡å’Œå¤šæœåŠ¡å™¨éƒ¨ç½²

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2025-11-22  
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
